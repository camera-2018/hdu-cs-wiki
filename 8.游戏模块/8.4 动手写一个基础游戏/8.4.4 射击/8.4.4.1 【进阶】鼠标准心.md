# 实现子弹类

## 学习目标

1. 实现鼠标瞄准准心

## 操作流程

### 新建 Canvas

1. 在 Heriarchy 中新建 Canvas，并在其中新建 Image
2. 将准心图片拖入 Image 组件的 Sprite 中
3. 将 Canvas 的 Render Mode 改为 Screen Space-Camera，并将 Main Camera 拖入 Render Camera 上
4. 实现 GunCursor 类

```csharp
using UnityEngine;

public class GunCursor : MonoBehaviour
{
    private float pressedTime = 0f; // 按下时间
    void Update()
    {
        // 获取鼠标位置
        Vector2 mousePosition = Input.mousePosition;
        // 转换为画布坐标
        RectTransformUtility.ScreenPointToLocalPointInRectangle(
            transform.parent.GetComponent<RectTransform>(),
            mousePosition,
            Camera.main,
            out Vector2 localPoint
        );
        // 设置光标位置
        transform.localPosition = localPoint;
        if (Input.GetMouseButton(0))
        {
            pressedTime += Time.deltaTime; // 增加按下时间
        }
        else
        {
            pressedTime -= Time.deltaTime;
        }

        pressedTime = Mathf.Clamp(pressedTime, 0, 0.5f);
        transform.localScale = Mathf.Lerp(1, 1.2f, pressedTime * 2) * Vector3.one;
    }
}
```

## 概念解析

### Canvas

画布 (Canvas) 组件表示进行 UI 布局和渲染的抽象空间。所有 UI 元素都必须是附加了画布组件的游戏对象的子对象。从菜单 (GameObject > Create UI) 创建 UI 元素对象时，如果场景中没有画布 (Canvas) 对象，则会自动创建该对象。

总而言之，Unity 的所有 UI 依靠 Canvas 进行绘制。
相关链接：[Canvas](https://docs.unity.cn/cn/2023.2/Manual/class-Canvas.html)
