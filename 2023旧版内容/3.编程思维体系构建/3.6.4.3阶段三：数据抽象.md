# é˜¶æ®µä¸‰ï¼šæ•°æ®æŠ½è±¡

æ•°æ®æŠ½è±¡ (Data Abstraction)

::: warning ðŸ± [å¯å‚è€ƒæ•™ç¨‹](https://zhuanlan.zhihu.com/p/343133774)

å„ä½éœ€è¦è®¤çœŸäº†è§£ä»¥ä¸‹å†…å®¹ï¼Œä»–ä»¬æ˜¯æž„å»ºä»»ä½•å¤§åŽ¦çš„åŸºçŸ³
:::

## Data Abstraction

æ•°æ®æŠ½è±¡æ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„æ¦‚å¿µï¼Œå®ƒå…è®¸ç¨‹åºå‘˜å°†ä»£ç ä»¥å¯¹è±¡çš„å½¢å¼è¿›è¡Œçœ‹å¾…ï¼Œå¹¶ä¸”ä»Žæ›´é«˜çš„å±‚é¢åŽ»å®¡è§†é—®é¢˜ã€‚

ç®€å•æ¥è¯´ï¼Œå®ƒå¯ä»¥å¸®åŠ©ç¨‹åºå‘˜ä¸ç”¨å…·ä½“åŽ»äº†è§£ç¨‹åºåšäº†ä»€ä¹ˆï¼Œè€Œæ˜¯æ›´åŽ»é‡è§†å®ƒæœ‰ä»€ä¹ˆç”¨ã€‚

ä¸¾ä¸ªä¾‹å­ï¼šä½ åœ¨å¼€è½¦æ—¶ï¼Œå¦‚æžœè¦æŽ§åˆ¶å‘åŠ¨æœºçš„æ´»å¡žæ€Žä¹ˆåŠ¨ï¼Œå¯¹ä½ æ¥è¯´æ˜¯å¦æœ‰äº›å¤ªè¿‡äºŽå›°éš¾äº†ã€‚å› æ­¤å°†å…¶æŠ½è±¡æˆäº†ç¦»åˆå™¨ï¼Œæ²¹é—¨ï¼Œåˆ¹è½¦è¿™äº›è¾ƒä¸ºç®€å•çš„æ“ä½œã€‚

## ç»„æˆ

ä¸€ä¸ªæŠ½è±¡çš„æ•°æ®ç±»åž‹ï¼ˆADTï¼‰ç”±ä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ç»„æˆ

- Constructors:æž¶æž„æŠ½è±¡æ•°æ®ç±»åž‹çš„ä¸»è¦å‡½æ•°
- Selectors:æ“ä½œæ•°æ®ç±»åž‹çš„å„å¼æ–¹æ³•

## åˆ—è¡¨ä¸Žå…ƒç»„

åˆ—è¡¨æ˜¯å¯ä»¥å­˜å‚¨å¤šä¸ªå…ƒç´ çš„ Python æ•°æ®ç»“æž„ã€‚æ¯ä¸ªå…ƒç´ å¯ä»¥æ˜¯ä»»ä½•ç±»åž‹ï¼Œç”šè‡³å¯ä»¥æ˜¯å¦ä¸€ä¸ªåˆ—è¡¨ï¼

```python
>>> list_of_nums = [1, 2, 3, 4]
>>> list_of_bools = [True, True, False, False]
>>> nested_lists = [1, [2, 3], [4, [5]]]
```

å…¶å¯ä»¥éšæ„çš„å¢žåŠ åˆ é™¤æˆ–æ”¹åŠ¨å…ƒç´ 

å…ƒç»„ä½•å…¶å·®ä¸å¤šï¼Œä½†æ˜¯æœ€å¤§çš„å·®è·åœ¨äºŽï¼Œå…ƒç»„æ˜¯é™æ€çš„ï¼Œä¸å¯éšæ„æ›´æ”¹çš„ï¼Œè¦æƒ³æ”¹åŠ¨ï¼Œå¿…é¡»é‡æ–°å¼€å¯ä¸€ç‰‡å†…å­˜ç©ºé—´

```python
tup = (1, 2, 3, 4)
new_tup = tup + (5, ) # åˆ›å»ºæ–°çš„å…ƒç»„ new_tupï¼Œå¹¶ä¾æ¬¡å¡«å……åŽŸå…ƒç»„çš„å€¼
new _tup
(1, 2, 3, 4, 5)

l = [1, 2, 3, 4]
l.append(5) # æ·»åŠ å…ƒç´  5 åˆ°åŽŸåˆ—è¡¨çš„æœ«å°¾
l
[1, 2, 3, 4, 5]
```

åŒæ—¶ï¼Œä½ å¯ä»¥å¯¹åˆ—è¡¨å’Œå…ƒç»„è¿›è¡Œç´¢å¼•ï¼Œç”šè‡³ä½¿ç”¨ï¼šè¿›è¡Œåˆ‡ç‰‡æ“ä½œï¼Œè¿™éƒ¨åˆ†å†…å®¹åœ¨ä»¥åŽçš„ä»»åŠ¡ä¼šæœ‰ä½“çŽ°

```python
>>> lst = [True, False, True, True, False]
>>> lst[1:4]
[False, True, True]
>>> lst[:3]  # Start index defaults to 0
[True, False, True]
>>> lst[3:]  # End index defaults to len(lst)
[True, False]
>>> lst[:]  # Creates a copy of the whole list
[True, False, True, True, False]
```

```python
>>> lst = [6, 5, 4, 3, 2, 1]
>>> lst[0]
6
>>> lst[3]
3
```

::: warning ðŸ¤” æ€è€ƒé¢˜ï¼š

åˆ—è¡¨å’Œå…ƒç»„åœ¨æ€§èƒ½ä¸Šæœ‰ä»€ä¹ˆå·®å¼‚å‘¢ï¼Ÿ

ä»–ä»¬å¯¹åº”çš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›å‘¢ï¼Ÿ
:::

## ;ltyi å­—å…¸ä¸Žé›†åˆ

å­—å…¸æ˜¯ä¸€ç³»åˆ—ç”±é”®ï¼ˆkeyï¼‰å’Œå€¼ï¼ˆvalueï¼‰é…å¯¹ç»„æˆçš„å…ƒç´ çš„é›†åˆï¼Œåœ¨ Python3.7+ï¼Œå­—å…¸è¢«ç¡®å®šä¸ºæœ‰åº

ç›¸æ¯”äºŽåˆ—è¡¨å’Œå…ƒç»„ï¼Œå­—å…¸çš„æ€§èƒ½æ›´ä¼˜ï¼Œç‰¹åˆ«æ˜¯å¯¹äºŽæŸ¥æ‰¾ã€æ·»åŠ å’Œåˆ é™¤æ“ä½œï¼Œå­—å…¸éƒ½èƒ½åœ¨å¸¸æ•°æ—¶é—´å¤æ‚åº¦å†…å®Œæˆã€‚

è€Œé›†åˆå’Œå­—å…¸åŸºæœ¬ç›¸åŒï¼Œå”¯ä¸€çš„åŒºåˆ«ï¼Œå°±æ˜¯é›†åˆæ²¡æœ‰é”®å’Œå€¼çš„é…å¯¹ï¼Œæ˜¯ä¸€ç³»åˆ—æ— åºçš„ã€å”¯ä¸€çš„å…ƒç´ ç»„åˆã€‚

```python
d1 = {'name': 'jason', 'age': 20, 'gender': 'male'}
d2 = dict({'name': 'jason', 'age': 20, 'gender': 'male'})
d3 = dict([('name', 'jason'), ('age', 20), ('gender', 'male')])
d4 = dict(name='jason', age=20, gender='male') 
d1 == d2 == d3 ==d4
True

s1 = {1, 2, 3}
s2 = set([1, 2, 3])
s1 == s2
True
```

å½“ç„¶ï¼Œé™¤äº†åˆ›å»ºå’Œè®¿é—®ï¼Œå­—å…¸å’Œé›†åˆä¹ŸåŒæ ·æ”¯æŒå¢žåŠ ã€åˆ é™¤ã€æ›´æ–°ç­‰æ“ä½œã€‚

```python
d = {'name': 'jason', 'age': 20}
d['gender'] = 'male' # å¢žåŠ å…ƒç´ å¯¹'gender': 'male'
d['dob'] = '1999-02-01' # å¢žåŠ å…ƒç´ å¯¹'dob': '1999-02-01'
d
{'name': 'jason', 'age': 20, 'gender': 'male', 'dob': '1999-02-01'}
d['dob'] = '1998-01-01' # æ›´æ–°é”®'dob'å¯¹åº”çš„å€¼ 
d.pop('dob') # åˆ é™¤é”®ä¸º'dob'çš„å…ƒç´ å¯¹
'1998-01-01'
d
{'name': 'jason', 'age': 20, 'gender': 'male'}

s = {1, 2, 3}
s.add(4) # å¢žåŠ å…ƒç´  4 åˆ°é›†åˆ
s
{1, 2, 3, 4}
s.remove(4) # ä»Žé›†åˆä¸­åˆ é™¤å…ƒç´  4
s
{1, 2, 3}
```

::: warning ðŸ¤” æ€è€ƒé¢˜ï¼š

å­—å…¸å’Œé›†åˆåˆ†åˆ«æ˜¯ä»€ä¹ˆåŽŸç†å‘¢ï¼Ÿ

å­—å…¸å¯ä»¥æ˜¯ä¸€ä¸ªåˆ—è¡¨å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ
:::

## å¯å˜æ€§

æˆ‘ä»¬è¯´å¦‚æžœä¸€ä¸ªå¯¹è±¡å¯ä»¥ç”±ä»£ç è¿›è¡Œæ“ä½œè€Œæ”¹å˜é‚£ä¹ˆæˆ‘ä»¬ç§°å…¶å…·æœ‰å¯å˜æ€§ã€‚

å¯å˜å¯¹è±¡çš„ç¤ºä¾‹åŒ…æ‹¬åˆ—è¡¨å’Œå­—å…¸ã€‚ä¸å¯å˜å¯¹è±¡çš„ç¤ºä¾‹åŒ…æ‹¬å…ƒç»„å’Œå‡½æ•°ã€‚

æˆ‘ä»¬å‡å®šå·²ç»çŸ¥é“äº†å¦‚ä½•ä½¿ç”¨ `==` è¿ç®—ç¬¦æ¥æ£€æŸ¥ä¸¤ä¸ªè¡¨è¾¾å¼çš„è®¡ç®—ç»“æžœæ˜¯å¦**ç›¸åŒ**ã€‚

æˆ‘ä»¬çŽ°åœ¨å¼•å…¥ä¸€ä¸ªæ–°çš„æ¯”è¾ƒè¿ç®—ç¬¦ `is`ï¼Œå®ƒæ£€æŸ¥ä¸¤ä¸ªè¡¨è¾¾å¼çš„è®¡ç®—ç»“æžœæ˜¯å¦**ç›¸åŒ**ã€‚

```python
>>> 2 + 2 == 3 + 1
True
>>> 2 + 2 is 3 + 1
True
```

æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ

```python
>>> large_num1 = 23333333333333333333
>>> large_num2 = 23333333333333333333
>>> large_num1 == large_num2
True
>>> large_num1 is large_num2
False
>>> lst1 = [1, 2, 3, 4]
>>> lst2 = [1, 2, 3, 4]
>>> lst1 == lst2
True
>>> lst1 is lst2
False
```

æ¬¸ï¼Ÿä¸ºä»€ä¹ˆæœ€åŽä¸€ä¸ªä¸ä¸€æ ·äº†ï¼Ÿ

å…¶å®žåŽŸå› æ˜¯ï¼Œä½ åˆ›å»ºçš„ä¸¤ä¸ªåˆ—è¡¨è™½ç„¶å†…å®¹ç›¸åŒï¼Œä½†æ˜¯æ¯•ç«Ÿæ˜¯ä¸¤ä¸ªä¸åŒçš„åˆ—è¡¨ï¼Œå…¶åœ¨å†…å­˜ç©ºé—´ä¸Šå¹¶ä¸ä¸€æ ·ã€‚

è¿™åœ¨è®¨è®ºå¯å˜æ€§çš„æ—¶å€™éžå¸¸é‡è¦ï¼Œå½“æˆ‘ä»¬æ”¹å˜ä¸€ä¸ªæ•°çš„å€¼çš„æ—¶å€™è¿™éžå¸¸é‡è¦

```python
>>> lst1 = [1, 2, 3, 4]
>>> lst2 = lst1
>>> lst1.append(5)
>>> lst2
[1, 2, 3, 4, 5]
>>> lst1 is lst2
True
```

::: warning ðŸ¤” æ€è€ƒé¢˜ï¼Œä½ èƒ½å¦ä»ŽæŒ‡é’ˆçš„è§’åº¦åŽ»ç†è§£å¯å˜æ€§å‘¢ï¼Ÿ
:::

## ä»»åŠ¡

P7:9*9 ä¹˜æ³•è¡¨

å¯èƒ½çŽ°åœ¨å¯¹ä½ æ¥è¯´ï¼Œæž„å»ºåƒä¸‹å›¾è¿™æ ·çš„ 99 ä¹˜æ³•è¡¨å·²ç»æ˜¯éžå¸¸å®¹æ˜“çš„ä¸€ä»¶äº‹äº†ï¼Œå¯æ˜¯å¦‚æžœæˆ‘è¦æ±‚ä½ ä½¿ç”¨ python çš„åˆ—è¡¨æŽ¨å¯¼å¼ (list comprehension)ï¼Œåœ¨ä¸¤è¡Œä»¥å†…å®Œæˆå‘¢ï¼Ÿ

![](https://cdn.xyxsw.site/boxcnccDSRQj5W3lZWEUkCOHz2b.png)

P8ï¼šcouple æƒ…ä¾£

å®žçŽ°å‡½æ•° `couple`ï¼Œå®ƒæŽ¥å—ä¸¤ä¸ªåˆ—è¡¨å¹¶è¿”å›žä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªåºåˆ—çš„ç¬¬ i ä¸ªå…ƒç´ è€¦åˆåœ¨ä¸€èµ·çš„åˆ—è¡¨ã€‚æ‚¨å¯ä»¥å‡è®¾ä¸¤ä¸ªåºåˆ—çš„é•¿åº¦ç›¸åŒã€‚
tipsï¼šzip(list1,list2)

```python
def couple(lst1, lst2):
    """Return a list that contains lists with i-th elements of two sequences
    coupled together.
    >>> lst1 = [1, 2, 3]
    >>> lst2 = [4, 5, 6]
    >>> couple(lst1, lst2)
    [[1, 4], [2, 5], [3, 6]]
    >>> lst3 = ['c', 6]
    >>> lst4 = ['s', '1']
    >>> couple(lst3, lst4)
    [['c', 's'], [6, '1']]
    """
    assert len(lst1) == len(lst2)
    "*** YOUR CODE HERE ***"
```

P 8.5ï¼šå¯¹åŸŽå¸‚æ•°æ®æŠ½è±¡

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŸŽå¸‚çš„æŠ½è±¡æ•°æ®ç±»åž‹ã€‚åŸŽå¸‚æœ‰åç§°ã€çº¬åº¦åæ ‡å’Œç»åº¦åæ ‡ã€‚

è¿™æ˜¯æˆ‘ä»¬æž„é€ åŸŽå¸‚çš„å‡½æ•°

make_city(name, lat, lon)

æž„å»ºä¸€ä¸ªåŸŽå¸‚å¯¹è±¡æœ‰ç»çº¬åº¦å’Œåå­—

- `get_name(city)`ï¼šè¿”å›žåŸŽå¸‚åç§°
- `get_lat(city)`ï¼šè¿”å›žåŸŽå¸‚çš„çº¬åº¦
- `get_lon(city)`ï¼šè¿”å›žåŸŽå¸‚çš„ç»åº¦

```python
>>> nanjing = make_city('Nanjing', 31, 118)
>>> get_name(nanjing)
'Nanjing'
>>> get_lat(nanjing)
31
>>> beijing = make_city('Beijing', 39, 116)
>>> get_lon(beijing)
116
```

```python
def make_city(name, lat, lon):
    """
    >>> city = make_city('Berkeley', 0, 1
    >>> get_name(city)
    'Berkeley
    >>> get_lat(city)
    0
    >>> get_lon(city)
    1
    """    
    return [name, lat, lon]

def get_name(city):
    """
    >>> city = make_city('Berkeley', 0, 1)
    >>> get_name(city)
    'Berkeley'
    """
    return city[0]

def get_lat(city):
    """
    >>> city = make_city('Berkeley', 0, 1)
    >>> get_lat(city)
    0
    """
    return city[1]

def get_lon(city):
    """
    >>> city = make_city('Berkeley', 0, 1)
    >>> get_lon(city)
    1
    """
    return city[2]
```

é¦–å…ˆä½ è¯•è¯•æ±‚å‡ºä¸¤ä¸ªåœ°æ–¹çš„è·ç¦»ã€‚

`(x2, y2)` å¯ä»¥é€šè¿‡è®¡ç®— çš„ sqrt æ¥æ‰¾åˆ° `(x1 - x2)**2 + (y1 - y2)**2`ã€‚`sqrt` æˆ‘ä»¬å¼•ç”¨äº†

```python
from math import sqrt
def distance(city1, city2):
    """
    >>> city1 = make_city('city1', 0, 1)
    >>> city2 = make_city('city2', 0, 2)
    >>> distance(city1, city2)
    1.0
    >>> city3 = make_city('city3', 6.5, 12)
    >>> city4 = make_city('city4', 2.5, 15)
    >>> distance(city3, city4)
    5.0
    """
    "*** YOUR CODE HERE ***"
```

å®žçŽ° `closer_city` ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æŽ¥å—ä¸€ä¸ªçº¬åº¦ã€ç»åº¦å’Œä¸¤ä¸ªåŸŽå¸‚ï¼Œå¹¶è¿”å›žä¸Žæä¾›çš„ç»çº¬åº¦ç›¸å¯¹è¾ƒè¿‘çš„åŸŽå¸‚åç§°ã€‚

```python
def closer_city(lat, lon, city1, city2):
    """
    Returns the name of either city1 or city2, whichever is closest to
    coordinate (lat, lon).

    >>> berkeley = make_city('Berkeley', 37.87, 112.26)
    >>> stanford = make_city('Stanford', 34.05, 118.25)
    >>> closer_city(38.33, 121.44, berkeley, stanford)
    'Stanford'
    >>> bucharest = make_city('Bucharest', 44.43, 26.10)
    >>> vienna = make_city('Vienna', 48.20, 16.37)
    >>> closer_city(41.29, 174.78, bucharest, vienna)
    'Bucharest'
    """
    "*** YOUR CODE HERE ***"
```
