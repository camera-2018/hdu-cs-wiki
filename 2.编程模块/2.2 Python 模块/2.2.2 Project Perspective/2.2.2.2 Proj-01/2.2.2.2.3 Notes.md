# è¡¥æ³¨å–µ

for Proj-01

## å…³äºè™šæ‹Ÿç¯å¢ƒ

### è™šæ‹Ÿç¯å¢ƒæ˜¯ä»€ä¹ˆï¼Ÿ

æ˜¯ä¸€ç§ç”¨äºéš”ç¦»é¡¹ç›®ä¾èµ–å…³ç³»çš„å·¥å…·ã€‚æ¯ä¸ªè™šæ‹Ÿç¯å¢ƒéƒ½æœ‰è‡ªå·±çš„è§£é‡Šå™¨å’Œåº“ã€‚

> é€šå¸¸è™šæ‹Ÿç¯å¢ƒä¸­çš„è§£é‡Šå™¨ä¼šæŒ‡å‘å…¨å±€ç¯å¢ƒä¸­çš„è§£é‡Šå™¨ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨çˆ†æ”¹å…¨å±€ç¯å¢ƒï¼ˆä¸»è¦æ˜¯æ›´æ”¹è§£é‡Šå™¨ä½ç½®ï¼‰ååˆ«å¿˜äº†é‡å»ºä½ çš„è™šæ‹Ÿç¯å¢ƒã€‚

### ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿç¯å¢ƒ

ä¸»è¦æ˜¯èƒ½å¤Ÿé¿å…ä¸åŒé¡¹ç›®çš„ä¾èµ–çš„å†²çªã€‚æ¯”å¦‚æœ‰ä¸€ä¸ªé¡¹ç›®éœ€æ±‚ä½ç‰ˆæœ¬çš„`numpy`ä½†æ˜¯å¦ä¸€ä¸ªéœ€æ±‚é«˜ç‰ˆæœ¬ï¼ŒæŠŠå®ƒä»¬æ”¾åœ¨åŒä¸€ä¸ªç¯å¢ƒä¸­å°è¯•å®‰è£…ä¾èµ–æ—¶å°±ä¼šå‡ºé—®é¢˜ã€‚

### æ‰‹åŠ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

é€šè¿‡VSCodeåˆ›å»ºè¯¦è§æ­£æ–‡ã€‚è¿™é‡Œå°è¯•è®²è§£æ‰‹åŠ¨ä½¿ç”¨å†…ç½®æ¨¡å—`venv`è¿›è¡Œåˆ›å»ºã€‚

åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­æ‰“å¼€ç»ˆç«¯ï¼Œä½¿ç”¨ä¸‹é¢çš„æŒ‡ä»¤åˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€‚

```bash
python -m venv ./.venv
```

å¤§æ¦‚å°±æ˜¯è°ƒç”¨Pythonçš„ä¸€ä¸ªå«`venv`çš„æ¨¡å—ï¼Œåœ¨å½“å‰ç›®å½•ä¸‹çš„`.venv`æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€‚

> å°†è™šæ‹Ÿç¯å¢ƒæ‰€åœ¨æ–‡ä»¶å¤¹å‘½åä¸º`.venv`æ˜¯ä¸€ä¸ªçº¦å®šä¿—æˆçš„åšæ³•ï¼Œå¾ˆå¤šå¼€å‘å·¥å…·çš„é»˜è®¤è¡Œä¸ºå°±æ˜¯è¿™æ ·ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨è¯†åˆ«å¹¶ä½¿ç”¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­çš„è™šæ‹Ÿç¯å¢ƒã€‚

ç¨ç­‰ä¸€ä¸‹å°±èƒ½å®Œæˆã€‚å¾ˆå¿«åœ°ï¼Œé¡¹ç›®æ–‡ä»¶å¤¹ä¸‹å¤šå‡ºäº†ä¸€ä¸ªå«`.venv`çš„æ–‡ä»¶å¤¹ã€‚

åœ¨ç»ˆç«¯ä¸‹æ‰§è¡Œ`./.venv/Scripts/activate`å°±èƒ½æ‰‹åŠ¨æ¿€æ´»è™šæ‹Ÿç¯å¢ƒã€‚

> è‹¥é‡åˆ°`powershell`é˜»æ­¢ï¼ŒæŒ‰ç…§æç¤ºè¿›è¡Œè®¾ç½®å³å¯ã€‚

è¦æ£€æŸ¥æ˜¯å¦çœŸæ­£å¤„äºè™šæ‹Ÿç¯å¢ƒï¼Œä½¿ç”¨powershellæŒ‡ä»¤`Get-Command`æŸ¥æ‰¾`python`è§£é‡Šå™¨çš„ä½ç½®ï¼Œåˆ¤æ–­ä¸€ä¸‹æ˜¯å¦å¤„äºæ­£ç¡®çš„ä½ç½®ï¼ˆ`.venv/Scripts/python`ï¼‰å°±è¡Œäº†ã€‚

## å…³äº`requests`åº“

å¾ˆä¼˜é›…çš„ä¸€ä¸ªå¤šçº¿ç¨‹å®‰å…¨çš„ç¬¬ä¸‰æ–¹ç½‘ç»œè¯·æ±‚åº“ã€‚

ä¸è¿‡ä½ ä¹Ÿå¯ä»¥å°è¯•åªç”¨Pythonæ ‡å‡†åº“å®ç°è¿™ä¸ªé¡¹ç›®ï¼Œè¿™æ˜¯å¯ä»¥åšåˆ°çš„ï¼

## å…³äºè¯­æ³•

> *Pythonå¾ˆå®¹æ˜“å…¥é—¨ï¼Œè¯­æ³•é™åˆ¶ä¹Ÿå¾ˆå°‘ã€‚ä½†è¿™ä¸æ„å‘³ç€å®ƒå¾ˆç®€å•ï¼Œæ›´ä¸æ„å‘³ç€å®ƒå¾ˆéšä¾¿ã€‚*
>
> â€”â€” MelodyEcho

è¿™é‡Œä»…å°è¯•è®²è§£æ­£æ–‡ä¸­ä½¿ç”¨åˆ°çš„ã€‚

å¿«å»çœ‹[å®˜æ–¹æ–‡æ¡£](https://docs.python.org/zh-cn/3/reference/index.html)

### æ³¨é‡Š

Pythonä¸­ä½¿ç”¨`#`ç¬¦è¿›è¡Œæ³¨é‡Šï¼Œåœ¨å½“å‰è¡Œä¸­éå­—ç¬¦ä¸²å†…å®¹çš„`#`åŠå…¶åçš„å†…å®¹éƒ½ä¼šè¢«å½“æˆæ³¨é‡Šã€‚

æœ‰æ—¶èƒ½åœ¨ä¸€äº›æ–‡ä»¶çœ‹åˆ°ä»¥`#!`å¼€å¤´çš„é¦–è¡Œæ³¨é‡Šï¼Œè¿™è¢«ç§°ä½œShebangã€‚

> Shebangè¿™ä¸€è¯­æ³•ç‰¹æ€§ç”±`#!`å¼€å¤´ã€‚åœ¨å¼€å¤´å­—ç¬¦ä¹‹åï¼Œå¯ä»¥æœ‰ä¸€ä¸ªæˆ–æ•°ä¸ªç©ºç™½å­—ç¬¦ï¼Œåæ¥è§£é‡Šå™¨çš„ç»å¯¹è·¯å¾„ï¼Œç”¨äºè°ƒç”¨è§£é‡Šå™¨ã€‚åœ¨ç›´æ¥è°ƒç”¨è„šæœ¬æ—¶ï¼Œè°ƒç”¨è€…ä¼šåˆ©ç”¨Shebangæä¾›çš„ä¿¡æ¯è°ƒç”¨ç›¸åº”çš„è§£é‡Šå™¨ï¼Œä»è€Œä½¿å¾—è„šæœ¬æ–‡ä»¶çš„è°ƒç”¨æ–¹å¼ä¸æ™®é€šçš„å¯æ‰§è¡Œæ–‡ä»¶ç±»ä¼¼ã€‚[^1]

ä½ è¯´å¾—å¯¹ â˜ï¸ğŸ¤“ï¼Œä½†æ˜¯`'''`ï¼Œå³è¿ç»­çš„ä¸‰ä¸ªå¼•å·åŒ…å›´çš„å†…å®¹ä¸æ˜¯æ³¨é‡Šï¼Œè€Œæ˜¯å¤šè¡Œå­—ç¬¦ä¸²ã€‚å®ƒä¹Ÿå¸¸è¢«ç”¨åœ¨[docstring](https://peps.python.org/pep-0257/)ä¸­ã€‚

### æ§åˆ¶æµ

å‚è§ [Grammar_playground](./2.2.2.2.4%20Grammar%20Playground.md)

### å¯¼å…¥æ¨¡å—

`import`è¯­å¥ç”¨äºå¯¼å…¥æ¨¡å—ã€‚

> æœ‰ä¸€ä¸ªå«`importlib`çš„åº“ä¹Ÿå¯ä»¥ç”¨æ¥å¯¼å…¥æ¨¡å—ï¼Œè€Œä¸”åŠ¨æ€

å¸¸ç”¨çš„å†™æ³•ï¼š

```python
# ç›´æ¥å¯¼å…¥
import math 
import os.path
# ä»æŸä¸ªæ¨¡å—ä¸­å¯¼å…¥å¯¹è±¡
from lxml import etree  
# å¯¼å…¥æŸä¸ªæ¨¡å—ä¸­çš„æ‰€æœ‰å¯¹è±¡åˆ°å½“å‰å‘½åç©ºé—´ä¸­ï¼Œéå¿…è¦ä¸ä½¿ç”¨
from tkinter import *   
# æ¢ä¸ªåç§°å¯¼å…¥
from tkinter import messagebox as msgbox    
# å¯¼å…¥å¤šä¸ªå¯¹è±¡
from urllib import request, parse   
# ä¸Šè¿°æŒ‡å®šäº†æ¨¡å—åçš„å«åšç»å¯¹å¯¼å…¥ï¼Œä»é¡¹ç›®çš„æ ¹ç›®å½•å¼€å§‹å¯¼å…¥æ¨¡å—

# ä¸‹é¢çš„æ˜¯ç›¸å¯¹å¯¼å…¥ï¼Œä¸€èˆ¬ç”¨åœ¨åŒ…çš„å†…éƒ¨æ–‡ä»¶ä¹‹é—´ã€‚
from . import utils 
from ..module_a import func
```

[PEP8](https://peps.python.org/pep-0008/#imports) ä¸­å¯¹äºå¯¼å…¥è¯­å¥çš„å†™æ³•æœ‰æ¨èï¼Œå¯ä»¥çœ‹çœ‹ã€‚

å…³äºæœºåˆ¶ï¼ŒPythonä¼šæŒ‰é¡ºåºæœç´¢`sys.path`åˆ—è¡¨ä¸­çš„æ¯ä¸ªç›®å½•ï¼ŒæŸ¥æ‰¾ä¸æ¨¡å—ååŒ¹é…çš„æ–‡ä»¶ã€‚

`sys.path`é»˜è®¤åŒ…æ‹¬ï¼š

- å½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•
- `%PYTHONPATH%`ç¯å¢ƒå˜é‡æŒ‡å®šçš„ç›®å½•
- æ ‡å‡†åº“ç›®å½•ï¼Œé€šå¸¸æ˜¯`python/Lib`
- å®‰è£…çš„ç¬¬ä¸‰æ–¹åŒ…çš„ç›®å½•ï¼Œé€šå¸¸æ˜¯`python/Lib/site-packages`

> ä¼˜å…ˆçº§ï¼šå½“å‰ç›®å½• -> site-packages -> å†…ç½®æ¨¡å—

ä½ å¯ä»¥æ‰‹åŠ¨ä¸º`sys.path`æ·»åŠ è·¯å¾„ï¼Œè®©å®ƒå»é¢å¤–çš„ç›®å½•æ‰¾æ¨¡å—ï¼›ä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ¨¡å—åŠ è½½çš„å„ä¸ªæ­¥éª¤ï¼Œæ€»ä¹‹å°±æ˜¯è‡ªç”±åº¦ååˆ†~~ç”šè‡³ä¹åˆ†~~åœ°é«˜ã€‚

æ›´å¤šå†…å®¹å‚è§[å®˜æ–¹æ–‡æ¡£](https://docs.python.org/zh-cn/3/reference/simple_stmts.html#import)ï¼Œæˆ–è€…å»é—®é—®AIã€‚

### å‡½æ•°

#### å‡½æ•°çš„å®šä¹‰

ä½¿ç”¨`def`æˆ–è€…`lambda`å®šä¹‰ï¼Œç”±åè€…å®šä¹‰çš„å‡½æ•°å«åšåŒ¿åå‡½æ•°ã€‚

> å‡½æ•°å®šä¹‰æ˜¯ä¸€æ¡**å¯æ‰§è¡Œè¯­å¥**ã€‚å®ƒæ‰§è¡Œæ—¶ä¼šåœ¨å½“å‰å±€éƒ¨å‘½åç©ºé—´ä¸­å°†å‡½æ•°åç§°ç»‘å®šåˆ°ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼ˆå‡½æ•°å¯æ‰§è¡Œä»£ç çš„åŒ…è£…å™¨ï¼‰ã€‚è¿™ä¸ªå‡½æ•°å¯¹è±¡åŒ…å«å¯¹å½“å‰å…¨å±€å‘½åç©ºé—´çš„å¼•ç”¨ï¼Œä½œä¸ºå‡½æ•°è¢«è°ƒç”¨æ—¶æ‰€ä½¿ç”¨çš„å…¨å±€å‘½åç©ºé—´ã€‚ï¼ˆæ‘˜è‡ªå®˜æ–¹æ–‡æ¡£ï¼‰

å—¯ä½ é—®å‡½æ•°å®ƒæœ¬èº«æ˜¯ä»€ä¹ˆâ€¦â€¦ ~~å‡½æ•°å®ƒå°±æ˜¯å‡½æ•°å•Š~~

Pythonä¸­çš„å‡½æ•°æ˜¯**å°è£…**äº†ä»£ç å—çš„**å¯¹è±¡**ã€‚ä½¿ç”¨å®ƒå¯ä»¥å¤ç”¨ä»£ç ï¼Œå‡å°‘é‡å¤ã€‚

å¿«å»çœ‹[å®˜æ–¹æ–‡æ¡£](https://docs.python.org/zh-cn/3/reference/compound_stmts.html#function)ww

ä¸€ä¸ªå…¸å‹çš„å‡½æ•°å¤§æ¦‚é•¿è¿™æ ·ï¼š

```python
#   å½¢å¼å‚æ•°  å‚æ•°ç±»å‹æ ‡æ³¨ï¼ˆå¯é€‰ï¼‰
#        vv vvvvvvvvvvv
def join(ss : list[str]) -> str:
#   ^^^^---------------- ^^^^^^
#  å‡½æ•°å    å½¢å¼å‚æ•°åˆ—è¡¨    è¿”å›å€¼ç±»å‹æ ‡æ³¨ï¼ˆå¯é€‰ï¼‰
    return "".join(ss)
```

> å…³äºå½¢å‚ä¸å®å‚
>
> å½¢å‚æ˜¯å‡½æ•°åœ¨å®šä¹‰çš„æ—¶å€™å†™å¥½çš„å‚æ•°ï¼Œå®å‚æ˜¯å‡½æ•°åœ¨è¢«å®é™…è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°

> ä¸ºä»€ä¹ˆè¦åšç±»å‹æ ‡æ³¨(Type Hints)ï¼Ÿ
>
> ä½ è¯´å¾—å¯¹ğŸ¤“ï¼Œè™½ç„¶Pythonæ˜¯ä¸€ç§åŠ¨æ€ç±»å‹è¯­è¨€ï¼Œä½†æ˜¯ç±»å‹æ ‡æ³¨ä¹Ÿæœ‰å¾ˆå¤šå¥½å¤„ã€‚å®ƒèƒ½æå‡ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§ï¼Œä»¥åŠä¾¿äºç”Ÿæˆæ–‡æ¡£ã€‚æ­¤å¤–åœ¨é¢å¯¹ç¨å¾®å¤æ‚ä¸€äº›çš„ä»£ç æ—¶å•é IDEè¿›è¡Œç±»å‹æ¨å¯¼ä¼šæ˜¾å¾—æœ‰äº›åƒåŠ›ï¼Œä½†è¦æ˜¯åŠ ä¸Šç±»å‹æ ‡æ³¨çš„è¯å°±å¯ä»¥å¸®åŠ©~~æ€ç»´é˜»æ»çš„~~IDEè¿›è¡Œè‡ªåŠ¨è¡¥å…¨å’Œé”™è¯¯æ£€æµ‹ç­‰å·¥ä½œã€‚
>
> ä¸è¿‡å®ƒå®Œå…¨æ˜¯å¯é€‰çš„ï¼Œæœ€ç»ˆå†™ä¸å†™è¿˜æ˜¯å–å†³äºä½ å°±æ˜¯äº†ã€‚
>
> å…³äºç±»å‹æ ‡æ³¨çš„è¯¦ç»†è®²è§£ï¼Œè§[Proj-02çš„è¡¥æ³¨](../2.2.2.3%20Proj-02/2.2.2.3.3%20Notes.md)ã€‚

#### å…³äºå‡½æ•°çš„é»˜è®¤å‚æ•°

**ä¸è¦å°†é»˜è®¤å‚æ•°è®¾å®šä¸ºå¯å˜å¯¹è±¡**ã€‚ä½œä¸ºæ›¿ä»£ï¼Œå¯ä»¥å°†é»˜è®¤å‚æ•°è®¾å®šä¸º`None`ï¼Œå¹¶åœ¨å‡½æ•°å†…éƒ¨è¿›è¡Œå¤„ç†ã€‚

å› ä¸ºå‡½æ•°çš„é»˜è®¤å‚æ•°åªä¼šåœ¨å®šä¹‰æ—¶è¢«è®¡ç®—ä¸€æ¬¡ï¼Œåç»­æ¯æ¬¡è°ƒç”¨æ—¶å®ƒä»¬éƒ½ä¼šè¢«å…±äº«ã€‚å¦‚æœé»˜è®¤å‚æ•°è¢«ä¿®æ”¹ï¼Œè¿™äº›ä¿®æ”¹ä¼šå½±å“åˆ°åç»­çš„å‡½æ•°è°ƒç”¨ã€‚å®ƒåœ¨é»˜è®¤å‚æ•°è¢«å®å‚è¦†ç›–æ—¶ä¸ä¼šæœ‰é—®é¢˜ï¼Œä½†åœ¨é»˜è®¤å‚æ•°ç•™ç©ºæ—¶ä¾¿ä¼šå‡ºç°æ„æ–™å¤–çš„æƒ…å†µã€‚

æ¥çœ‹ä¾‹å­ã€‚

```python
>>> def append_to_list(value, my_list=[]):
...     my_list.append(value)
...     return my_list
...
>>> print(append_to_list(1))
[1]
>>> print(append_to_list(2))
[1, 2]
>>> print(append_to_list(3))
[1, 2, 3]
```

æ›¿æ¢ä¸ºä½¿ç”¨`None`ï¼š

```python
>>> def append_to_list(value, my_list=None):
...     if my_list is None:
...         my_list = []
...     my_list.append(value)
...     return my_list
...
>>> print(append_to_list(1))
[1]
>>> print(append_to_list(2))
[2]
>>> print(append_to_list(3))
[3]
```

### å¼‚å¸¸

[å®˜æ–¹æ–‡æ¡£](https://docs.python.org/zh-cn/3/reference/compound_stmts.html#the-try-statement)

#### å¼‚å¸¸æ•è·

å®Œå…¨ä½“çš„å¼‚å¸¸å¤„ç†å¤§æ¦‚åƒè¿™æ ·ï¼š

```python
try:
    # å¯èƒ½ä¼šå‡ºé”™çš„ä»£ç 
    x = 1 / int(input("Your Number:"))
    assert 1 == 0, "oops, 1 != 0"
except ZeroDivisionError as e:
    ... # å‘ç”Ÿé™¤é›¶é”™è¯¯æ—¶ä¼šæ‰§è¡Œçš„ä»£ç 
except AssertionError as e:
    ... # å‘ç”Ÿæ–­è¨€é”™è¯¯æ—¶ä¼šæ‰§è¡Œçš„ä»£ç 
except Exception as e:
    ... # å‘ç”Ÿä¸€èˆ¬é”™è¯¯æ—¶ä¼šæ‰§è¡Œçš„ä»£ç 
else:
    ... # æ²¡æœ‰å‘ç”Ÿé”™è¯¯æ—¶ä¼šæ‰§è¡Œçš„ä»£ç 
finally:
    ... # ä¸ç®¡å‘ç”Ÿäº†ä»€ä¹ˆéƒ½ä¼šæ‰§è¡Œçš„ä»£ç 
```

å¼‚å¸¸åŒ¹é…é¡ºåºä»ä¸Šåˆ°ä¸‹ï¼ŒåŒ¹é…æˆåŠŸåä¾¿ä¸å†ç»§ç»­åŒ¹é…ã€‚è‹¥æœ€ç»ˆéƒ½æ²¡æœ‰åŒ¹é…ä¸Šåˆ™é”™è¯¯è¿˜æ˜¯ä¼šè¢«æŠ›å‡ºï¼ˆä½†`finally`å—ä»ç„¶æœ‰æ•ˆï¼‰

> å…³äºè£¸`except:`
>
> ç­‰ä»·äº`except BaseException:`ï¼Œå¯ä»¥æ•è·**æ‰€æœ‰**å¼‚å¸¸ï¼ŒåŒ…æ‹¬ç³»ç»Ÿé€€å‡ºå’Œä¸­æ–­çš„å¼‚å¸¸ï¼Œåƒ `SystemExit`ã€`KeyboardInterrupt` å’Œ `GeneratorExit`ã€‚å› ä¸ºç»å¸¸ä¼šæ•è·åˆ°ä¸è¯¥æ•è·çš„ä¸œè¥¿ï¼Œè¯­ä¹‰ä¸æ˜ç¡®æ‰€ä»¥ä¸å»ºè®®ä½¿ç”¨ã€‚
>
> ä¸€èˆ¬æ—¥å¸¸å»ºè®®ä½¿ç”¨`except Exception:`ã€‚å°±ç®—ä½ çœŸçš„æƒ³æ•è·ç³»ç»Ÿçº§å¼‚å¸¸ï¼Œä¹Ÿåº”è¯¥ä½¿ç”¨`except BaseException:`è¿›è¡Œå¹³æ›¿ï¼Œå› ä¸ºå®ƒçš„è¯­ä¹‰æ›´æ˜ç¡®ä¸€äº›ã€‚

> `...`ï¼Ÿ
>
> æ²¡é”™`...`ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå«åš`Ellipsis`ï¼Œé€šå¸¸ç”¨æ¥è¡¨ç¤ºçœç•¥æˆ–å ä½ã€‚åœ¨æŸäº›ç‰¹æ®Šçš„åœºæ™¯å¾ˆæœ‰ç”¨ï¼ˆæ¯”å¦‚`numpy`ä¸­åˆ›å»ºå¤šç»´æ•°ç»„ï¼‰ã€‚

`except ... as ...`å¯ä»¥å°†æ•è·çš„å¼‚å¸¸å®ä¾‹ä¿å­˜åˆ°ä¸€ä¸ªå˜é‡ä¸­ï¼Œæ–¹ä¾¿åç»­åšå¤„ç†

#### å¼‚å¸¸æŠ›å‡º

ä½¿ç”¨`raise`è¯­å¥æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸**å¯¹è±¡**ã€‚

> åœ¨æŠ›å‡ºä¹‹å‰ï¼Œå…ˆè¦å°†å¼‚å¸¸ç±»å®ä¾‹åŒ–ï¼Œåœ¨å®ä¾‹åŒ–æ—¶å¯ä»¥ä¼ é€’å…·ä½“çš„é”™è¯¯æ¶ˆæ¯ã€‚ï¼ˆä¸å®ä¾‹åŒ–å°±æŠ›å‡ºæ˜¯py2çš„åšæ³•ï¼‰

```python
raise RuntimeError("A runtime error.")
```

`raise ... from ...`å¯ä»¥ä»ä¸€ä¸ªå·²æœ‰çš„å¼‚å¸¸å®ä¾‹æŠ›å‡ºä¸€ä¸ªæ–°å¼‚å¸¸ï¼ŒåŸæœ‰å¼‚å¸¸ä¼šè¢«ä¿å­˜åœ¨æ–°å¼‚å¸¸çš„`__cause__`å±æ€§ä¸­ã€‚å¸¸ç”¨åœ¨`except`å—ä¸‹ã€‚

### å˜é‡ä½œç”¨åŸŸä¸ç”Ÿå‘½å‘¨æœŸ

Pythonä¸­çš„å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸæ˜¯å®ƒç›´æ¥æ‰€åœ¨çš„å‡½æ•°ï¼Œå…¨å±€å˜é‡çš„åˆ™æ˜¯å®ƒæ‰€åœ¨çš„æ¨¡å—ã€‚

åœ¨ä¸€ä¸ªå˜é‡è¶…å‡ºå®ƒçš„ä½œç”¨åŸŸï¼Œä¸”å®ƒçš„å¼•ç”¨è®¡æ•°å˜ä¸º`0`æ—¶ï¼Œå®ƒå°±ä¼šè¢«åˆ é™¤ã€‚

> å¯¹äºå¾ªç¯å¼•ç”¨ï¼ŒPythonçš„åƒåœ¾å›æ”¶å™¨è´Ÿè´£æ¸…ç†å®ƒä»¬ã€‚å¯ä»¥é€šè¿‡è°ƒç”¨`gc.collect()`æ¥æ‰‹åŠ¨æ‰§è¡Œåƒåœ¾å›æ”¶ã€‚

> Pythonæ²¡æœ‰åƒC/C++æˆ–Javaé‚£æ ·çš„å—çº§ä½œç”¨åŸŸ(Block Scope)ï¼Œåœ¨æ§åˆ¶ç»“æ„ (`if`/`while`/`match`/`for`/ ...) ä¸­å£°æ˜çš„å˜é‡åœ¨æ§åˆ¶ç»“æ„ä¹‹å¤–ä¾ç„¶å¯ä»¥è®¿é—®ï¼Œåªè¦æ˜¯åœ¨ç›¸åŒçš„å‡½æ•°æˆ–å…¨å±€ä½œç”¨åŸŸä¸­ï¼›ä¹Ÿæ²¡æœ‰åƒ js é‚£æ ·çš„[å˜é‡æå‡](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Grammar_and_types#%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87)ï¼Œåœ¨å˜é‡è¢«å£°æ˜å¹¶èµ‹å€¼ä¹‹å‰è®¿é—®å®ƒä¼šæŠ¥é”™ã€‚

~~æ¥ç‚¹Cè¯­è¨€ç¬‘è¯ï¼š~~

```c
void just_a_test(void){
    // æˆ‘ æœ‰ å¼‚ åŸŸ ç—‡
    {int i;}
    {i = 0;}
}
```

### å¼•ç”¨ä¸æ‹·è´

Pythonä¸­çš„**æ‰€æœ‰æ•°æ®éƒ½æ˜¯å¯¹è±¡**ã€‚å˜é‡åå®é™…ä¸Šæ˜¯æŒ‡å‘è¿™äº›å¯¹è±¡çš„å¼•ç”¨ã€‚å½“ä½ èµ‹å€¼ä¸€ä¸ªå˜é‡æ—¶ï¼Œä½ åªæ˜¯å°†è¿™ä¸ªå˜é‡åç»‘å®šåˆ°æŸä¸ªå¯¹è±¡ä¸Šï¼Œå¹¶ä¸å¤åˆ¶å¯¹è±¡æœ¬èº«ã€‚

```python
>>> a = [1, 2, 3]
>>> a
[1, 2, 3]
>>> b = a
>>> b.append(4)
>>> a
[1, 2, 3, 4]
```

> è¦å¤åˆ¶å¯¹è±¡ï¼Œå¯ä½¿ç”¨`copy`åº“ä¸­çš„`copy()`å’Œ`deepcopy()`å‡½æ•°ï¼Œæˆ–æŸäº›å¯¹è±¡å†…ç½®çš„`copy()`æ–¹æ³•
>
> - `copy()`: æµ…æ‹·è´ï¼Œä»…å¤åˆ¶é¡¶å±‚ç»“æ„ï¼Œäº§ç”Ÿçš„æ–°å¯¹è±¡å†…å±‚ä»ç„¶å…±äº«ã€‚
> - `deepcopy()`: æ·±æ‹·è´ï¼Œå¤åˆ¶æ•´ä¸ªå¯¹è±¡ï¼Œäº§ç”Ÿçš„æ–°å¯¹è±¡å®Œå…¨ç‹¬ç«‹

Pythonä¸­çš„å¯¹è±¡åˆ†ä¸ºå¯å˜ï¼ˆe.g.åˆ—è¡¨/å­—å…¸/é›†åˆï¼‰å’Œä¸å¯å˜ï¼ˆe.g.æ•´æ•°/å­—ç¬¦ä¸²/å…ƒç»„ï¼‰ä¸¤ç§ã€‚

å¯¹äºä¸å¯å˜çš„å¯¹è±¡ï¼Œå¯¹å®ƒåšä¿®æ”¹æˆ–èµ‹å€¼ä¼šåœ¨åŸåœ°ç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå†å°†è¿™ä¸ªå¯¹è±¡ç»‘å®šåˆ°å˜é‡ä¸Šã€‚è¿™å°±æ˜¯å¹³æ—¶åœ¨æ•°å­—/å­—ç¬¦ä¸²å˜é‡ä¹‹é—´è¿›è¡Œèµ‹å€¼çœ‹èµ·æ¥åƒæ‹·è´çš„åŸå› ã€‚

```python
>>> a = 1
>>> b = a
>>> b = 2
>>> a
1
>>> b
2
```

> å¸¸è§çš„ä¸å¯å˜å¯¹è±¡åŒ…æ‹¬ï¼š
>
> - æ•´æ•°`int`
> - æµ®ç‚¹æ•°`float`
> - å­—ç¬¦ä¸²`str`
> - å…ƒç»„`tuple`
> - å¸ƒå°”å€¼`bool`
> - å­—èŠ‚ä¸²`bytes`
> - å†»ç»“é›†åˆ`frozenset`
>
> è¯¦è§[å®˜æ–¹æ–‡æ¡£](https://docs.python.org/zh-cn/3/reference/datamodel.html)

### withè¯­å¥

[å®˜æ–¹æ–‡æ¡£](https://docs.python.org/zh-cn/3/reference/compound_stmts.html#with)

å¯¹äºå¸¦æœ‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨`with`æ¥è¿›è¡Œä¸Šä¸‹æ–‡ç®¡ç†ã€‚

è¿›å…¥`with`è¯­å¥å—æ—¶ï¼Œå¯¹è±¡çš„`__enter__()`æ–¹æ³•ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼›ç¦»å¼€æ—¶ï¼Œå¯¹è±¡çš„`__exit__()`æ–¹æ³•ä¹Ÿä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼Œæ— è®ºå‡ºé”™ä¸å¦ã€‚ä¿è¯èƒ½å¤Ÿæ­£ç¡®å…³é—­å¥æŸ„ã€ç»“æŸä¼šè¯ç­‰ã€‚

```python
with open("./result.txt", "w+", encoding="utf-8") as fp:
    fp.write("Pretending to be data")
```

> `requests`ä¸­çš„è¯·æ±‚ä¹Ÿå¯ä»¥ç”¨å™¢ï¼Œçœ‹çœ‹[æœ¬èŠ‚çš„ä»£ç ](https://github.com/NingmengLemon/hcw-pyproj/tree/main/src/Proj-01)ï¼Ÿ

## æ ¼å¼åŒ–å­—ç¬¦ä¸²

æ ¼å¼åŒ–å­—ç¬¦ä¸²æ˜¯æŒ‡å°†å˜é‡æˆ–è¡¨è¾¾å¼çš„å€¼åµŒå…¥åˆ°å­—ç¬¦ä¸²ä¸­çš„ä¸€ç§æ–¹æ³•ï¼Œå„ä¸ªç¼–ç¨‹è¯­è¨€éƒ½æœ‰å„è‡ªçš„æ ¼å¼åŒ–å­—ç¬¦ä¸²æ–¹æ³•ã€‚å¯¹äºPythonï¼Œ[å®˜æ–¹æ–‡æ¡£](https://docs.python.org/zh-cn/3/tutorial/inputoutput.html)ä¸­åˆ—ä¸¾æœ‰å››ç§ï¼Œé€‰æ‹©é€‚åˆçš„å³å¯ã€‚

### f-string

é€šè¿‡åœ¨ä»¥`f""`åŒ…æ‹¬çš„å­—ç¬¦ä¸²ä¸­ä½¿ç”¨`{expression}`æ¥åµŒå…¥å€¼ï¼Œåœ¨è¡¨è¾¾å¼åç´§æ¥`:` `!` `=`ç­‰æ ¼å¼è¯´æ˜ç¬¦å¯ä»¥æŒ‡å®šæ ¼å¼ã€‚é‡å¤çš„èŠ±æ‹¬å·å¯ä»¥å¾—åˆ°èŠ±æ‹¬å·æœ¬èº«ã€‚è¯¦è§å®˜æ–¹æ–‡æ¡£ã€‚

```python
>>> a = 11.4514
>>> f"{a}" 
'11.4514'
>>> f"ww{a:08.2f}" # æ ¼å¼åŒ–
'ww00011.45'
>>> f"{a=}" # è‡ªè¯´æ˜
'a=11.4514'
>>> f"{int!r}" # è½¬æ¢
"<class 'int'>"
>>> f"}}{a}{{" # èŠ±æ‹¬å·è½¬ä¹‰
'}11.4514{'
```

### format

`format()`æ˜¯å­—ç¬¦ä¸²å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•[^2]ã€‚åŒæ ·é€šè¿‡èŠ±æ‹¬å·å‘æŒ¥æ•ˆç”¨ã€‚åœ¨æ ¼å¼è¯´æ˜ç¬¦`:` `!`ä¸Šçš„è¯­æ³•ä¸`f-string`ç›¸åŒï¼Œä½†å…¶ä½™éƒ¨åˆ†ç•¥æœ‰ä¸åŒã€‚

```python
>>> a = 11.4514
>>> "{}".format(a)  
'11.4514'
>>> "{=}".format(a)  # æ²¡æœ‰`=`è¯´æ˜ç¬¦
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyError: '='
>>> "{:08.2f}".format(a)
'00011.45'
>>> b = 191.981  
>>> "{1:.2f} {0:.3f}".format(a, b)  # æŒ‡å®šä½ç½®
'191.98 11.451'
>>> "{b:.2f} {a:.3f}".format(a=a, b=b)  # æŒ‡å®šå…³é”®å­—
'191.98 11.451'
```

è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨`format`æ–¹æ³•ä¸­ä½¿ç”¨å‚æ•°è§£åŒ…ç­‰å¾ˆå¸…çš„æ“ä½œ â€”â€” coolï¼

æ›´å¤šä¿¡æ¯å‚è§[å®˜æ–¹æ–‡æ¡£](https://docs.python.org/zh-cn/3/tutorial/inputoutput.html#the-string-format-method)

### æ—§å¼æ ¼å¼åŒ–

Pythonæ”¯æŒé€šè¿‡åœ¨å­—ç¬¦ä¸²åç´§è·Ÿ`%`ç¬¦è¿›è¡Œæ ¼å¼åŒ–ã€‚å½“åªæœ‰ä¸€ä¸ªå€¼æ—¶æ‹¬å·å¯çœã€‚

åˆè¢«ç§°ä½œ`printf`é£æ ¼æ ¼å¼åŒ–ï¼Œè¯¦è§[å®˜æ–¹æ–‡æ¡£](https://docs.python.org/zh-cn/3/library/stdtypes.html#old-string-formatting)ã€‚Cè¯­è¨€ä¸­çš„ç›¸å…³å†…å®¹å‚è§ [cppreference](https://zh.cppreference.com/w/cpp/header/cstdio)ã€‚

```python
>>> "%.2f" % (a)
'11.45'
```

### æ‰‹åŠ¨æ ¼å¼åŒ–

è¯¦è§[å®˜æ–¹æ–‡æ¡£](https://docs.python.org/zh-cn/3/tutorial/inputoutput.html#manual-string-formatting)

[^1]: <https://zh.wikipedia.org/wiki/Shebang>

[^2]: åŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œè‹¥æ„Ÿå…´è¶£å¯ä»¥è‡ªè¡ŒæŸ¥é˜…[æ–‡æ¡£](https://docs.python.org/zh-cn/3/library/functions.html#format)ã€‚
